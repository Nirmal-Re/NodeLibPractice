// const fs = require("fs");
// const path = require("path");

// const filePath = path.join(__dirname, "/SmartboxLogger");
// console.log(fs.readdirSync(filePath));

const mostRecentFolder = (folders) => {
  const linuxNow = parseInt((new Date().getTime() / 1000).toFixed(0));
  let difference = Number.MAX_SAFE_INTEGER;
  let previous = "";
  for (let i = 0; i < folders.length; i++) {
    const dates = folders[i].split("_");
    dates[dates.length - 1] = dates[dates.length - 1].replaceAll("-", ":");
    const folderDate = dates.join("T");
    const linuxFolderDate = parseInt(
      (new Date(folderDate).getTime() / 1000).toFixed(0)
    );
    if (linuxNow - linuxFolderDate < difference) {
      previous = folders[i];
      difference = linuxNow - linuxFolderDate;
    }
  }
  return previous;
};

const data = [
  "2022-11-03_12-01-26",
  "2022-11-04_12-01-46",
  "2022-11-05_12-01-27",
  "2022-11-06_12-01-52",
  "2022-11-07_12-00-15",
  "2022-11-08_12-00-03",
  "2022-11-09_12-00-19",
  "2022-11-10_12-00-07",
  "2022-11-11_12-01-41",
  "2022-11-12_12-00-08",
  "2022-11-13_12-00-27",
  "2024-01-15_12-02-28",
  "2022-11-14_12-01-28",
  "2022-11-15_12-01-29",
  "2022-11-16_12-01-54",
  "2022-11-17_12-01-16",
  "2022-11-18_12-00-04",
  "2022-11-19_12-00-18",
  "2022-11-20_12-00-09",
  "2022-11-21_12-01-44",
  "2022-11-22_12-01-53",
  "2022-11-28_12-01-42",
  "2022-11-29_12-01-53",
  "2022-11-30_12-01-50",
  "2022-12-03_12-01-46",
  "2022-12-04_12-01-54",
  "2022-12-05_12-01-36",
  "2022-12-06_12-02-07",
  "2022-12-07_12-01-45",
  "2022-12-08_12-01-34",
  "2022-12-09_12-01-53",
  "2022-12-10_12-01-40",
  "2022-12-11_12-02-07",
  "2022-12-19_12-01-52",
  "2022-12-20_12-01-46",
  "2022-12-21_12-01-41",
  "2022-12-22_12-02-07",
  "2022-12-23_12-01-52",
  "2022-12-24_12-01-40",
  "2022-12-25_12-02-03",
  "2022-12-26_12-01-47",
  "2022-12-27_12-02-09",
  "2022-12-28_12-02-08",
  "2022-12-29_12-01-58",
  "2023-01-15_12-02-28",
  "2022-12-30_12-01-58",
  "2022-12-31_12-01-44",
  "2023-01-03_12-02-15",
  "2023-01-04_12-02-05",
  "2023-01-05_12-01-57",
  "2023-01-06_12-01-55",
  "2023-01-14_12-02-09",
  "2023-01-07_12-01-40",
  "2023-01-08_12-02-25",
  "2023-01-09_12-02-10",
  "2023-01-10_12-02-02",
  "2023-01-11_12-02-00",
  "2023-01-12_12-02-29",
  "2023-01-13_12-02-15",
];

console.log(mostRecentFolder(data));
